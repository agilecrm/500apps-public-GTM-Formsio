___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "categories": ["MARKETING"],
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Forms.io by 500apps",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Forms.io enables you to build powerful and interactive forms which help in gathering data for research insight.\nhttps://infinity.500apps.com/forms",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "form_key",
    "displayName": "Form Key",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Please copy the Form Key from App -\u003eCreate a form -\u003e Embed. https://infinity.500apps.com/forms"
  },
  {
    "type": "TEXT",
    "name": "element_id",
    "displayName": "Element Id",
    "simpleValueType": true,
    "help": "Please specify the element id of the website where this form should reflect.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const injectScript = require('injectScript');
const encodeUriComponent = require('encodeUriComponent');
const form_key = encodeUriComponent(encodeUriComponent(data.form_key+'-'+data.element_id));
const trackingUrl='https://gtm.500apps.com/gtm/forms/'+form_key+'.js';
log('data = verify', trackingUrl);
injectScript(trackingUrl,data.gtmOnSuccess,data.gtmOnFailure);
// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://gtm.500apps.com/gtm/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Test case 1
  code: |-
    const mockData = {
      // Mocked field values
      form_key:"ZGV2LTI4MTQtMTE5Ni0xMTEz",
      element_id:"id"
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


___NOTES___

Created on 7/22/2021, 4:35:06 PM


